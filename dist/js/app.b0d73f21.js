(function(t){function e(e){for(var a,s,o=e[0],c=e[1],l=e[2],u=0,v=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&v.push(i[s][0]),i[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(v.length)v.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},r=[];function s(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-1aae924c":"3a864171","chunk-2d216214":"b52270e3","chunk-2d216257":"e79cc84f"}[t]+".js"}function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=i[t]=[e,a]}));e.push(n[2]=a);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=s(t);var l=new Error;r=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}i[t]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(e)},o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"13b8":function(t,e,n){},"1d32":function(t,e,n){"use strict";n("e898")},2176:function(t,e,n){},"3a5d":function(t,e,n){},4261:function(t,e,n){"use strict";n("44ef")},"44ef":function(t,e,n){},"47a7":function(t,e,n){},"508a":function(t,e,n){"use strict";n("13b8")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"https://i.imgur.com/0JQNulc.png",transition:"scale-transition",width:"40"}}),n("h1",[t._v("JOURNEY DOC")])],1),n("v-spacer"),n("itinerator-google-identity-login",{on:{login:t.saveAuthorization}})],1),n("v-main",[n("Dashboard",{attrs:{auth:t.auth}})],1)],1)},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",{staticClass:"text-center"},[n("v-col",{attrs:{cols:"12"}},[n("SaveStatus",{attrs:{"last-saved":t.lastSaved,loading:t.saving,offline:!t.online,"can-save":!!t.changedTrips.size},on:{save:t.postItineraries}}),n("trips-buttons",{attrs:{itineraries:t.allItineraries,selected:t.activeButtonKey},on:{"button-select":t.selectItinerary}}),this.selectedDates.length&&this.sortedActivities.length?n("download-buttons",{attrs:{name:t.currentTrip.name,"sorted-activities":t.sortedActivities,"between-dates":t.betweenDates,"display-dates":t.displayDates},on:{"delete-itinerary":t.deleteItinerary}}):t._e()],1),n("v-col",{staticClass:"left-col",attrs:{cols:"12",md:"3"}},[t.currentTrip.selected?n("section",{staticClass:"panel-container"},[this.viewDate?n("section",{staticClass:"activity-edit"},[t.editActivityToggle?n("form",[n("v-text-field",{attrs:{counter:30,label:"Activity Name",required:""},model:{value:t.viewDate.event.name,callback:function(e){t.$set(t.viewDate.event,"name",e)},expression:"viewDate.event.name"}}),n("v-textarea",{attrs:{counter:200,label:"Activity Details"},model:{value:t.viewDate.event.description,callback:function(e){t.$set(t.viewDate.event,"description",e)},expression:"viewDate.event.description"}}),n("section",{staticClass:"time-picker"},[n("div",[t._v(" Start Time: "),n("VueTimepicker",{attrs:{format:"HH:mm A"},model:{value:t.selectedActivity.start,callback:function(e){t.$set(t.selectedActivity,"start",e)},expression:"selectedActivity.start"}}),n("br")],1),n("div",[t._v(" End Time: "),n("VueTimepicker",{attrs:{format:"HH:mm A"},model:{value:t.selectedActivity.end,callback:function(e){t.$set(t.selectedActivity,"end",e)},expression:"selectedActivity.end"}})],1)]),n("div",{staticClass:"time-edit-message"},[t._v(" "+t._s(t.timeEditMessage)+" ")]),t._l(t.viewDate.event.links,(function(e,a){return n("div",{key:a},[n("v-text-field",{attrs:{label:"Activity Link"},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"link.value"}})],1)})),n("button",{on:{click:t.addLink}},[t._v(" Add Link ")]),n("v-checkbox",{attrs:{label:"Highlight"},model:{value:t.viewDate.event.highlight,callback:function(e){t.$set(t.viewDate.event,"highlight",e)},expression:"viewDate.event.highlight"}}),n("v-btn",{staticClass:"mr-4",attrs:{disabled:t.timeEditMessage},on:{click:t.saveItinerary}},[t._v(" Save ")]),n("v-btn",{on:{click:t.deleteEvent}},[t._v(" Delete ")])],2):n("activity-card",{staticClass:"activity-edit",attrs:{name:t.viewDate.event.name,description:t.viewDate.event.description,start:t.viewDate.event.start,end:t.viewDate.event.end,links:t.viewDate.event.links,highlight:t.viewDate.event.highlight,"image-url":t.viewDate.event.imageUrl||t.activityImage},on:{edit:function(e){return t.toggleEdit(!0)},close:t.closeEvent}})],1):n("section",{staticClass:"activity-cal"},[t.activeButtonKey?n("tab-bar",{on:{"tab-click":t.updateTab}}):t._e(),0===t.tab?n("trip-calendar",{attrs:{"selected-dates":t.selectedDates,"active-button-key":t.activeButtonKey,"has-dates":t.hasDates,"disabled-modify-date-checkbox":t.disabledModifyDateCheckbox},on:{"disable-modify-date":t.disableModifyDate,"emit-dates":t.emitDates,"save-modified-dates":t.saveModifiedDates}}):n("activity-panel",{attrs:{activities:t.sortedActivities.flat()},on:{"show-event":t.showEvent}})],1)]):t._e()]),n("v-col",{staticClass:"main-panel",attrs:{cols:"12","offset-md":"1",md:"8"}},[t.currentTrip.selected?n("v-row",{attrs:{justify:"center"}},[n("v-col",[n("h2",[t._v(t._s(t.displayDates))]),n("v-text-field",{attrs:{label:"Trip Name"},on:{change:t.nameChange},model:{value:t.currentTrip.name,callback:function(e){t.$set(t.currentTrip,"name",e)},expression:"currentTrip.name"}})],1)],1):t._e(),n("trip-agenda",{attrs:{"between-dates":t.betweenDates,"trip-days":t.currentTrip.tripDays},on:{"select-activity":t.viewDay,"select-event":t.showEvent,"save-event":t.saveItineraries,"create-event":t.createTripEvent,"update-event":t.updateTripEvent}})],1)],1)],1)},o=[],c=n("3835"),l=n("5530"),u=n("b85c"),d=n("1da1"),v=(n("96cf"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("b64b"),n("d81d"),n("4e82"),n("ac1f"),n("1276"),n("4fad"),n("a15b"),n("159b"),n("b0c0"),n("a434"),n("fb6a"),n("25f0"),n("99af"),n("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"tab-bar",attrs:{fluid:"",shaped:"",outlined:"",elevation:"12"}},[n("template",{slot:"progress"},[n("v-progress-linear",{attrs:{color:"gold",height:"10",indeterminate:""}})],1),n("v-img",{attrs:{height:"100",src:t.imageLink}}),n("v-row",{staticClass:"mx-0 name",attrs:{align:"center"}},[n("v-card-title",[t._v(t._s(t.name))]),t.highlight?n("v-icon",{attrs:{large:"",color:"#ffcb3b"}},[t._v(" mdi-star ")]):t._e()],1),n("v-card-text",[n("v-row",{staticClass:"mx-0 time",attrs:{align:"center"}},[n("v-chip",{attrs:{label:"",outlined:"","text-color":"#1976d2",color:"#1976d2"}},[t._v(t._s(t.startTime))]),n("span",{staticClass:"hyphen"},[t._v("-")]),n("v-chip",{attrs:{label:"",outlined:"","text-color":"#1976d2",color:"#1976d2"}},[t._v(t._s(t.endTime))])],1),n("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[n("div",[t._v(t._s(t.description))])]),t._l(t.links,(function(e,a){return n("v-row",{key:a,staticClass:"mx-0",attrs:{align:"center"}},[n("v-icon",{attrs:{small:"",color:"#1976d2"}},[t._v(" mdi-link ")]),n("a",{staticClass:"link",attrs:{href:e.value}},[t._v(t._s(t.formatLinkLabel(e.value)))])],1)}))],2),n("v-divider",{staticClass:"mx-4"}),n("v-card-title",[t._v("Notes")]),n("v-card-text",[n("v-chip-group",{attrs:{"active-class":"deep-purple accent-4 white--text",column:""},model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}},[n("v-chip",[t._v("Water")]),n("v-chip",[t._v("Outdoors")]),n("v-chip",[t._v("Fun")])],1)],1),n("v-card-actions",[n("v-btn",{attrs:{color:"deep-purple lighten-2",text:""},on:{click:function(e){return t.$emit("edit")}}},[t._v(" Edit ")]),n("v-btn",{attrs:{color:"deep-red lighten-2",text:""},on:{click:function(e){return t.$emit("close")}}},[t._v(" Close ")])],1)],2)}),h=[],f=(n("a9e3"),{name:"ActivityCard",props:{name:String,description:String,highlight:Boolean,links:Array,start:Number,end:Number,imageUrl:{type:String}},data:function(){return{selection:[]}},methods:{formatTime:function(t){var e="AM",n=t.getMinutes();n=n<10?"0"+n:n;var a=t.getHours();return a>=12&&(e="PM",a>12&&(a%=12)),"".concat(a,":").concat(n," ").concat(e)},formatLinkLabel:function(t){return t.split(".")[1]}},computed:{startTime:function(){return this.formatTime(new Date(this.start))},endTime:function(){return this.formatTime(new Date(this.end))},imageLink:function(){return this.imageUrl||"https://cdn.vuetifyjs.com/images/cards/cooking.png"}}}),p=f,m=(n("d4e2"),n("2877")),g=n("6544"),y=n.n(g),b=n("8336"),D=n("b0af"),w=n("99d9"),k=n("cc20"),T=n("ef9a"),x=n("ce7e"),_=n("132d"),S=n("adda"),C=n("8e36"),E=n("0fd9"),O=Object(m["a"])(p,v,h,!1,null,"20b10822",null),I=O.exports;y()(O,{VBtn:b["a"],VCard:D["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:w["c"],VChip:k["a"],VChipGroup:T["a"],VDivider:x["a"],VIcon:_["a"],VImg:S["a"],VProgressLinear:C["a"],VRow:E["a"]});var A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"tab-bar",attrs:{fluid:""}},[n("v-tabs",{attrs:{"background-color":"primary accent-4","fixed-tabs":"","center-active":"",dark:""},on:{change:function(e){return t.$emit("tab-click",e)}},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("v-tabs-slider",{attrs:{color:"yellow"}}),n("v-tab",[t._v("Calendar")]),n("v-tab",[t._v("Activities")])],1)],1)},j=[],$={name:"TabBar",data:function(){return{tab:null}}},M=$,V=(n("ce99"),n("71a3")),H=n("fe57"),B=n("9a96"),L=Object(m["a"])(M,A,j,!1,null,"3f8f9389",null),P=L.exports;y()(L,{VCard:D["a"],VTab:V["a"],VTabs:H["a"],VTabsSlider:B["a"]});var R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("v-date-picker",{ref:"picker",attrs:{disabled:t.disabledModifyDateCheckbox&&t.hasDates,dark:"","show-adjacent-months":"",range:"","no-title":""},on:{change:function(e){return t.$emit("emit-dates",e)}},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}}),t.activeButtonKey&&t.disabledModifyDateCheckbox?n("v-btn",{staticClass:"modify-cal-button",attrs:{color:"secondary"},on:{click:function(e){return t.$emit("disable-modify-date",!t.disabledModifyDateCheckbox)}}},[t._v("Modify Calendar")]):t._e(),t.activeButtonKey&&!t.disabledModifyDateCheckbox?n("v-btn",{staticClass:"modify-cal-button",attrs:{color:"success"},on:{click:function(e){return t.$emit("save-modified-dates",t.dates)}}},[t._v("Save New Dates")]):t._e()],1)},N=[],z={name:"TripCalendar",mounted:function(){this.dates=this.selectedDates},watch:{selectedDates:function(){this.dates=this.selectedDates}},data:function(){return{dates:null}},props:{selectedDates:{type:Array,default:function(){return[]}},disabledModifyDateCheckbox:{type:Boolean,default:!1},hasDates:{type:Boolean,default:!1},activeButtonKey:{type:String,default:""}},methods:{emitDates:function(){},saveModifiedDates:function(){}}},F=z,U=(n("4261"),n("2e4b")),K=Object(m["a"])(F,R,N,!1,null,"c78b78f4",null),J=K.exports;y()(K,{VBtn:b["a"],VDatePicker:U["a"]});var G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-sheet",{attrs:{height:"600"}},[t._l(t.betweenDates,(function(e,a){return n("v-calendar",{key:a,ref:"calendar-"+a,refInFor:!0,attrs:{weekdays:t.weekday,type:t.calendar.type,start:e,popover:"",events:(t.tripDays[e]||{}).activities,"event-overlap-mode":t.calendar.mode,"event-overlap-threshold":30,"event-color":t.getEventColor},on:{"mousedown:event":t.startDrag,"mousedown:time":function(e){return t.startTime(e,a)},"mousemove:time":function(e){return t.mouseMove(e,a)},"mouseup:time":function(e){return t.endDrag(e,a)},"click:event":function(n){return t.$emit("select-event",{event:n.event,index:a,day:e})},"click:more":function(e){return t.$emit("select-activity")},"click:date":function(e){return t.$emit("select-activity")}},nativeOn:{mouseleave:function(e){return t.cancelDrag(a)}},scopedSlots:t._u([{key:"day",fn:function(e){var a=e.past,i=e.date;return[n("v-row",{staticClass:"fill-height"},[t._v(" "+t._s(a)+" "+t._s(i)+" ")])]}},{key:"day-body",fn:function(e){var a=e.date,i=e.week;return[n("div",{staticClass:"v-current-time activity-on-cal",class:{first:a===i[0].date},style:{top:t.nowY}})]}},{key:"event",fn:function(e){var a=e.event,i=e.timed,r=e.eventSummary;return[n("div",{staticClass:"v-event-draggable",domProps:{innerHTML:t._s(r())}}),n("v-img",{staticClass:"activity-cal-image",attrs:{src:a.imageUrl}}),i?n("div",{staticClass:"v-event-drag-bottom",on:{mousedown:function(e){return e.stopPropagation(),t.extendBottom(a)}}},[n("v-icon",{attrs:{small:"",color:"white darken-2"}},[t._v(" mdi-arrow-expand-down ")])],1):t._e()]}}],null,!0),model:{value:t.calendarItems[a],callback:function(e){t.$set(t.calendarItems,a,e)},expression:"calendarItems[index]"}})})),n("v-menu",{attrs:{"close-on-content-click":!1,activator:t.selectedElement,"offset-x":""},model:{value:t.selectedOpen,callback:function(e){t.selectedOpen=e},expression:"selectedOpen"}},[n("v-card",{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[n("v-toolbar",{attrs:{color:t.selectedEvent.color,dark:""}},[n("v-btn",{attrs:{icon:""}},[n("v-icon",[t._v("mdi-pencil")])],1),n("v-toolbar-title",{domProps:{innerHTML:t._s(t.selectedEvent.name)}}),n("v-spacer"),n("v-btn",{attrs:{icon:""}},[n("v-icon",[t._v("mdi-heart")])],1),n("v-btn",{attrs:{icon:""}},[n("v-icon",[t._v("mdi-dots-vertical")])],1)],1),n("v-card-text",[n("span",{domProps:{innerHTML:t._s(t.selectedEvent.details)}})]),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(e){t.selectedOpen=!1}}},[t._v(" Cancel ")])],1)],1)],1)],2)},Y=[],q=["blue"],W={name:"TripAgenda",props:{betweenDates:{type:Array,default:function(){return[]}},tripDays:{type:Object,default:function(){}}},data:function(){return{calendarItems:{},calendar:{type:"day",types:["month","week","day","4day"],mode:"stack",modes:["stack","column"]},selectedElement:{},selectedOpen:!1,selectedEvent:{}}},methods:{nowY:function(){return this.cal?this.cal.timeToY(this.cal.times.now)+"px":"-10px"},startDrag:function(t){var e=t.event,n=t.timed;e&&n&&(this.dragEvent=e,this.dragTime=null,this.extendOriginal=null)},roundTime:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=15,a=60*n*1e3;return e?t-t%a:t+(a-t%a)},toTime:function(t){return new Date(t.year,t.month-1,t.day,t.hour,t.minute).getTime()},getEventColor:function(t){return t.color},extendBottom:function(t){console.log("EXTENDED"),this.createEvent=t,this.createStart=t.start,this.extendOriginal=t.end,this.$emit("save-event")},mouseMove:function(t,e){var n=this.toTime(t);if(this.dragEvent&&null!==this.dragTime){var a=this.dragEvent.start,i=this.dragEvent.end,r=i-a,s=n-this.dragTime,o=this.roundTime(s),c=o+r;this.dragEvent.start=o,this.dragEvent.end=c}else if(this.createEvent&&null!==this.createStart){var l=this.roundTime(n,!1),u=Math.min(l,this.createStart),d=Math.max(l,this.createStart);this.createEvent.start=u,this.createEvent.end=d,this.$emit("update-event",{index:e,event:this.createEvent})}},startTime:function(t,e){var n=this.toTime(t);if(this.dragEvent&&null===this.dragTime){var a=this.dragEvent.start;this.dragTime=n-a}else this.createStart=this.roundTime(n),this.createEvent={name:"Activity #".concat(this.tripDays[this.betweenDates[e]].activities.length+1),color:this.rndElement(q),start:this.createStart,end:this.createStart,timed:!0,links:[]},this.$emit("create-event",{index:e,event:this.createEvent})},rnd:function(t,e){return Math.floor((e-t+1)*Math.random())+t},rndElement:function(t){return t[this.rnd(0,t.length-1)]},endDrag:function(){this.$emit("save-event"),this.dragTime=null,this.dragEvent=null,this.createEvent=null,this.createStart=null,this.extendOriginal=null},cancelDrag:function(t){if(this.createEvent)if(this.extendOriginal)this.createEvent.end=this.extendOriginal;else{var e=this.tripDays[this.betweenDates[t]].activities.indexOf(this.createEvent);-1!==e&&this.tripDays[this.betweenDates[t]].activities.splice(e,1)}this.createEvent=null,this.createStart=null,this.dragTime=null,this.dragEvent=null}},computed:{weekday:function(){return[0,1,2,3,4,5,6]},weekdays:function(){return[{text:"Sun - Sat",value:[0,1,2,3,4,5,6]},{text:"Mon - Sun",value:[1,2,3,4,5,6,0]},{text:"Mon - Fri",value:[1,2,3,4,5]},{text:"Mon, Wed, Fri",value:[1,3,5]}]}}},Q=W,X=(n("1d32"),n("a4f6")),Z=n("e449"),tt=n("8dd9"),et=n("2fa4"),nt=n("71d9"),at=n("2a7f"),it=Object(m["a"])(Q,G,Y,!1,null,"5b8ec84a",null),rt=it.exports;y()(it,{VBtn:b["a"],VCalendar:X["a"],VCard:D["a"],VCardActions:w["a"],VCardText:w["b"],VIcon:_["a"],VImg:S["a"],VMenu:Z["a"],VRow:E["a"],VSheet:tt["a"],VSpacer:et["a"],VToolbar:nt["a"],VToolbarTitle:at["a"]});var st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"activities-card"},t._l(t.activities,(function(e,a){return n("v-card",{key:a,staticClass:"list-activity",attrs:{color:"white"},on:{click:function(n){return t.$emit("show-event",{event:e,index:a})}}},[n("h1",[t._v(t._s(e.name))]),n("h5",[t._v(t._s(t.activityDateFormat(e.start)))])])})),1)},ot=[],ct={name:"ActivityPanel",props:{activities:{type:Array,default:function(){return[]}}},methods:{activityDateFormat:function(t){var e=new Date(t),n=e.toString().split(" ").slice(0,3).join(" ");return"".concat(n," ").concat(e.toLocaleTimeString())}}},lt=ct,ut=(n("c178"),Object(m["a"])(lt,st,ot,!1,null,"db1da3bc",null)),dt=ut.exports;y()(ut,{VCard:D["a"]});var vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SaveStatus"},[t.canSave?n("v-btn",{staticClass:"ma-2",attrs:{color:"success"},on:{click:function(e){return t.$emit("save")}}},[t._v("Save")]):t._e(),t.loading?n("pulse-loader",{attrs:{loading:t.loading,color:"#1976d2",width:"300",height:"100"}}):n("span",[t._v(t._s(t.saveMesaage))])],1)},ht=[],ft=n("8a5d"),pt=n("7c4c"),mt=n("541d");pt["a"].addDefaultLocale(mt);var gt=new pt["a"]("en-US"),yt={name:"SaveStatus",components:{PulseLoader:ft["a"]},props:{offline:{type:Boolean,default:!1},lastSaved:{type:Number,default:null},loading:{type:Boolean,default:!1},canSave:Boolean},mounted:function(){var t=this;setInterval((function(){t.updated=Date.now()}),1e3)},data:function(){return{updated:Date.now(),message:"Not Saved"}},computed:{saveMesaage:function(){if(this.lastSaved&&this.updated){var t=gt.format(this.lastSaved);return"Saved ".concat(t)}return this.offline?"Offline":this.message}}},bt=yt,Dt=(n("687c"),Object(m["a"])(bt,vt,ht,!1,null,"995d4a60",null)),wt=Dt.exports;y()(Dt,{VBtn:b["a"]});var kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"trip-buttons"},[n("v-btn",{staticClass:"ma-2",attrs:{outlined:"new"!==t.selected,color:"success"},on:{click:function(e){return t.selectItinerary("new")}}},[t._v(" New Itinerary ")]),t._l(t.itineraries,(function(e,a){return n("v-btn",{key:a,staticClass:"ma-1",attrs:{outlined:e.key!==t.selected,color:"primary"},on:{click:function(n){return t.selectItinerary(e.key)}}},[t._v(" "+t._s(t.buttonName(e))+" ")])}))],2)},Tt=[],xt={name:"TripsButtons",props:{itineraries:{type:Array,default:function(){return[]}},selected:{type:String}},computed:{},methods:{buttonName:function(t){return t.name?t.name:t.stringifiedDates?this.formatDates(t.stringifiedDates.split("_")):"..."},selectItinerary:function(t){this.$emit("button-select",t)},formatDates:function(t){var e=Object(c["a"])(t,2),n=e[0],a=e[1],i=new Date(n),r=new Date(a);return n||a?a&&n!=a?"".concat(i.toDateString()," to ").concat(r.toDateString()):i.toDateString():"Select Dates"}}},_t=xt,St=(n("b0e0"),Object(m["a"])(_t,kt,Tt,!1,null,"2464aa7f",null)),Ct=St.exports;y()(St,{VBtn:b["a"]});var Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"download-buttons"},[n("span",[n("v-btn",{staticClass:"export",attrs:{elevation:"2",text:""},on:{click:t.download}},[t._v(" Export PDF ")]),n("v-btn",{on:{click:t.deleteItinerary}},[t._v(" Delete ")])],1)])},Ot=[],It=(n("4de4"),n("a4d3"),n("e01a"),n("caad"),n("2532"),n("8baf")),At={name:"DownloadButtons",props:{name:{type:String},displayDates:{type:String},sortedActivities:{type:Array,default:function(){return[]}},betweenDates:{type:Array,default:function(){return[]}}},methods:{deleteItinerary:function(){this.$emit("delete-itinerary")},download:function(){var t=this,e=new It["a"];e.setFontSize(30),e.text("".concat(this.name),20,30),e.setFontSize(16),e.text("".concat(this.displayDates),20,40);var n=40,a=1;this.sortedActivities.filter((function(t){return t})).forEach((function(i,r){n>=250*a&&(e.addPage(),n=10),e.setFontSize(22),e.text("".concat(t.betweenDates[r].toDateString()),20,20+n),i.forEach((function(t){var a=new Date(t.start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),i=new Date(t.end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});e.setFontSize(16),e.text("".concat(a," - ").concat(i),80,30+n,{align:"right"}),e.text(t.name,90,30+n),e.setFontSize(10);var r=5,s=70;if(t.description){var o=t.description;while(o.length>s){var c=o.slice(0,s);[c[c.length-1],o.slice(s,s+1)].includes(" ")||(c+="-"),e.text(c,90,30+r+n),o=o.slice(s),r+=5}e.text(o,90,30+r+n)}n+=15+r})),n+=20})),e.save("".concat(this.name," itinerary.pdf"))}}},jt=At,$t=Object(m["a"])(jt,Et,Ot,!1,null,null,null),Mt=$t.exports;y()($t,{VBtn:b["a"]});var Vt=n("fea2"),Ht=n("bc3a"),Bt=n.n(Ht),Lt={name:"Dashboard",components:{ActivityPanel:dt,TripsButtons:Ct,TripAgenda:rt,TabBar:P,TripCalendar:J,DownloadButtons:Mt,SaveStatus:wt,VueTimepicker:Vt["a"],ActivityCard:I},props:{auth:String},watch:{auth:function(t){this.authorization=t}},data:function(){return{currentTrip:{name:null,selected:!1,dates:null,betweenDates:null,tripDays:{}},changedTrips:new Set,lastChanged:null,online:!0,disabledModifyDateCheckbox:!1,authorization:null,activityImage:null,editActivityToggle:!1,selectedActivity:{day:null,start:{HH:"",mm:""},end:{HH:"",mm:""}},saving:!1,lastSaved:null,user:{},tab:0,itineraries:{},viewDate:null,activeButtonKey:null}},mounted:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.setSaveInterval(),t.online=t.networkConnected(),"v2"!==localStorage.getItem("itinerator-clear")&&(localStorage.setItem("itinerator","{}"),localStorage.setItem("itinerator-clear","v2"),t.$cookies.remove("itinerator-token")),t.authorization=t.$cookies.get("itinerator-token"),t.setItineraries(),t.$root.$on("login",(function(e){t.user=e}));case 6:case"end":return e.stop()}}),e)})))()},computed:{betweenDates:function(){return this.selectedDates.length?this.getBetweenDates(this.selectedDates):[]},hasDates:function(){return this.selectedDates.length>0&&!!this.displayDates},timeEditMessage:function(){var t=null;return(this.selectedActivity.start.HH>this.selectedActivity.end.HH||this.selectedActivity.start.HH===this.selectedActivity.end.HH&&this.selectedActivity.start.mm>this.selectedActivity.end.mm)&&(t="Please update your time interval."),t},activitiesMap:function(){if(!Object.keys(this.currentTrip.tripDays).length)return[];var t,e={},n=Object(u["a"])(this.currentTrip.tripDays);try{for(n.s();!(t=n.n()).done;){var a,i=t.value,r=i.key,s=i.activities,o=Object(u["a"])(s);try{for(o.s();!(a=o.n()).done;){var c=a.value;e[c.key]=Object(l["a"])(Object(l["a"])({},c),{},{parent:r})}}catch(d){o.e(d)}finally{o.f()}}}catch(d){n.e(d)}finally{n.f()}return e},sortedActivities:function(){var t=this;return Object.keys(this.currentTrip.tripDays).length?this.betweenDates.map((function(e){return t.currentTrip.tripDays[e].activities.sort((function(t,e){return t.start-e.start}))})):[]},betweenDatesMap:function(){return this.betweenDates.map((function(t){return t.toISOString().split("T")[0]}))},today:function(){var t=(new Date).toISOString().split("T")[0];return t},cal:function(){this.$nextTick(),window.refs=this.$refs;var t=this.betweenDatesMap.indexOf(this.today);return this.$refs["calendar-".concat(t)]},allItineraries:function(){return Object.entries(this.itineraries).map((function(t){var e=Object(c["a"])(t,2),n=e[0],a=e[1];return Object(l["a"])(Object(l["a"])({},a),{},{key:n})}))},displayDates:function(){return this.formatDates(this.selectedDates)},stringifiedDates:function(){return this.selectedDates.join("_")},selectedDates:function(){if(!this.currentTrip.dates||!this.currentTrip.dates.length)return[];var t=this.currentTrip.dates;return 1===t.length&&t.push[t[0]],t}},methods:{updateTripEvent:function(t){var e=t.index,n=t.event;n.key||(this.currentTrip.tripDays[this.betweenDates[e]].activities.forEach((function(t){t.name===n.name&&(t.start=n.start,t.end=n.end)})),this.saveItineraries())},createTripEvent:function(t){var e=t.index,n=t.event;this.currentTrip.tripDays[this.betweenDates[e]].activities.push(Object(l["a"])(Object(l["a"])({},n),{},{key:"".concat(Date.now())})),this.saveItineraries()},setSaveInterval:function(){var t=this;setInterval((function(){t.changedTrips.length}),6e4)},disableModifyDate:function(t){this.disabledModifyDateCheckbox=t},updateTab:function(t){this.tab=t},saveModifiedDates:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var a,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.disabledModifyDateCheckbox=!e.disabledModifyDateCheckbox,a=t.join("_"),i=e.currentTrip.stringifiedDates,i!==a&&(r=e.betweenDates.reduce((function(t,n){return t[n]=e.currentTrip.tripDays[n],t}),{}),e.$set(e.currentTrip,"tripDays",r)),e.saveItineraries();case 5:case"end":return n.stop()}}),n)})))()},addLink:function(t){t.preventDefault(),this.viewDate.event.links||(this.viewDate.event.links=[]),this.viewDate.event.links.push({value:""})},toggleEdit:function(t){this.editActivityToggle=!!t},updateEventTimes:function(){var t=this.viewDate.event,e=new Date(t.start),n=new Date(t.end);e.setHours(this.selectedActivity.start.HH),e.setMinutes(this.selectedActivity.start.mm),n.setHours(this.selectedActivity.end.HH),n.setMinutes(this.selectedActivity.end.mm),t.start=e.getTime(),t.end=n.getTime()},saveItinerary:function(){this.updateEventTimes(),this.saveItineraries(),this.toggleEdit(!1)},deleteItinerary:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t||e.activeButtonKey,delete e.itineraries[a],e.clearActive(),e.disabledModifyDateCheckbox=!1,n.next=6,e.saveItineraries();case 6:case"end":return n.stop()}}),n)})))()},closeEvent:function(){this.viewDate=null,this.selectedActivity={day:null,start:{HH:"",mm:""},end:{HH:"",mm:""}}},deleteEvent:function(){var t=this.viewDate,e=t.index,n=t.event,a=this.currentTrip.tripDays[this.betweenDates[e]].activities.indexOf(n);this.currentTrip.tripDays[this.betweenDates[e]].activities.splice(a,1),this.closeEvent()},showDate:function(t,e,n){var a=new Date(t.start),i=new Date(t.end);this.selectedActivity.day=n,console.log("parentKey",n),this.selectedActivity.start.HH=("0"+a.getHours().toString()).slice(-2),this.selectedActivity.start.mm=("0"+a.getMinutes().toString()).slice(-2),this.selectedActivity.end.HH=("0"+i.getHours().toString()).slice(-2),this.selectedActivity.end.mm=("0"+i.getMinutes().toString()).slice(-2),this.viewDate={event:t,index:e}},showEvent:function(t){var e=t.event,n=t.index,a=t.day;this.showDate(e,n,a)},viewDay:function(t){var e=t.date;console.log("date",e),this.calendar.type="day"},formatDates:function(t){var e=Object(c["a"])(t,2),n=e[0],a=e[1],i=new Date(n+" GMT-0500"),r=new Date(a+" GMT-0500");return n||a?a&&n!=a?"".concat(i.toDateString()," to ").concat(r.toDateString()):i.toDateString():"Select Dates"},clearActive:function(){var t=this;this.activeButtonKey=null,Object.keys(this.currentTrip).forEach((function(e){t.$set(t.currentTrip,e,null)}))},selectItinerary:function(t){var e=this;if(this.clearActive(),this.currentTrip.selected=!0,t&&"new"!==t){this.activeButtonKey=t;var n=this.itineraries[this.activeButtonKey];Object.keys(n).forEach((function(t){e.$set(e.currentTrip,t,n[t])})),this.$set(this.currentTrip,"dates",this.currentTrip.stringifiedDates.split("_")),this.hasDates&&(this.disabledModifyDateCheckbox=!0)}},changeDaysToActivities:function(t){return t&&0!==Object.keys(t).length?(Object.keys(t).forEach((function(e){var n=t[e];Object.keys(n.tripDays).forEach((function(t){var e=n.tripDays[t];e.days&&(e.activities=e.days,e.days=null)}))})),t):{}},setItineraries:function(){var t=localStorage.getItem("itinerator")||"{}",e=JSON.parse(t);this.itineraries=this.changeDaysToActivities(e)},getItineraries:function(){return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},networkConnected:function(){return navigator.onLine},clearAuthorization:function(){this.$cookies.remove("itinerator-token"),this.authorization=null},postItineraries:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n,a,i,r,s,o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("Posting Itineraries",t.networkConnected(),t.authorization),t.online=t.networkConnected(),t.online&&t.authorization||console.log("Not online, no authorization"),t.saving=!0,i={},r=Object(u["a"])(t.changedTrips);try{for(r.s();!(s=r.n()).done;)o=s.value,i[o]=t.itineraries[o]}catch(d){r.e(d)}finally{r.f()}return console.log("itineraries check",i),c="https://itinerator-api.herokuapp.com",e.next=12,Bt.a.post("".concat(c,"/users/save"),{itineraries:i,link:null===(n=t.viewDate||{})||void 0===n||null===(a=n.event)||void 0===a?void 0:a.links},{headers:{Authorization:t.authorization}});case 12:if(l=e.sent,401!==l.status){e.next=16;break}return t.clearAuthorization(),e.abrupt("return");case 16:t.changedTrips=new Set,t.saving=!1,t.lastSaved=Date.now(),Object.keys(l.data.itineraries).forEach((function(e){var n=l.data.itineraries[e];t.itineraries[e]=n,Object.keys(n).forEach((function(e){t.$set(t.currentTrip,e,n[e])}))})),t.activityImage=l.data.image;case 21:case"end":return e.stop()}}),e)})))()},saveItineraries:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.stringifiedDates&&(t.currentTrip.key||(n="".concat(Date.now()),t.currentTrip.key=n),t.changedTrips.add(t.currentTrip.key),t.itineraries[t.currentTrip.key]=Object(l["a"])(Object(l["a"])({},t.itineraries[t.currentTrip.key]),{},{key:t.currentTrip.key,stringifiedDates:t.stringifiedDates,name:t.currentTrip.name,tripDays:t.currentTrip.tripDays})),localStorage.setItem("itinerator",JSON.stringify(t.itineraries)),t.selectItinerary(t.currentTrip.key),t.setItineraries();case 4:case"end":return e.stop()}}),e)})))()},slashDate:function(t){return t.split("-").join("/")},getBetweenDates:function(t){var e=Object(c["a"])(t,2),n=e[0],a=e[1];n=new Date(this.slashDate(n)),a=new Date(this.slashDate(a));var i=[],r=n,s=function(t){var e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e};while(r<=a)i.push(r),r=s.call(r,1);return i},nameChange:function(){this.saveItineraries()},emitDates:function(t){this.currentTrip.dates=t;var e=this.betweenDates.reduce((function(t,e){return t[e]={activities:[]},t}),{});this.currentTrip.tripDays=Object(l["a"])(Object(l["a"])({},e),this.currentTrip.tripDays)},base64DecodeUrl:function(t){return t=(t+"===").slice(0,t.length+t.length%4),t.replace(/-/g,"+").replace(/_/g,"/")},base64EncodeUrl:function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}}},Pt=Lt,Rt=(n("508a"),n("ac7c")),Nt=n("62ad"),zt=n("a523"),Ft=n("8654"),Ut=n("a844"),Kt=Object(m["a"])(Pt,s,o,!1,null,"0243d26a",null),Jt=Kt.exports;y()(Kt,{VBtn:b["a"],VCheckbox:Rt["a"],VCol:Nt["a"],VContainer:zt["a"],VRow:E["a"],VTextField:Ft["a"],VTextarea:Ut["a"]});var Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("pulse-loader",{attrs:{loading:t.loading,color:"blue",width:"300",height:"100"}}),n("button",{directives:[{name:"show",rawName:"v-show",value:!t.loggedIn&&!t.loading,expression:"!loggedIn && !loading"}],on:{click:t.onLoginClick}},[t._v("Login")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.loggedIn&&!t.loading,expression:"loggedIn && !loading"}]},[t._v(" "+t._s(t.user.name)+" ")]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.loggedIn&&!t.loading,expression:"loggedIn && !loading"}],on:{click:t.onLoginClick}},[t._v("Logout")])],1)},Yt=[],qt={name:"ItineratorGoogleIdentityLogin",components:{PulseLoader:ft["a"]},data:function(){return{loggedIn:!1,loading:!1,renderParams:{},user:{},params:{clientId:"319013726287-iph43il9usnh7rosftnorlr5no9tht6r.apps.googleusercontent.com"}}},mounted:function(){var t=this;this.$nextTick((function(){t.getToken()&&(t.loggedIn=!0)}))},methods:{onLoginClick:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.loggedIn){e.next=3;break}return t.logout(),e.abrupt("return");case 3:return t.loading=!0,window.google=t,e.next=7,t.$gAuth.signIn();case 7:n=e.sent,n&&(console.log("googleUser",n),t.onSuccess(n));case 9:case"end":return e.stop()}}),e)})))()},logout:function(){this.$cookies.set("itinerator-token",null),this.loggedIn=!1,this.loading=!1},onLogoutSuccess:function(){console.log("Logged out"),this.loggedIn=!1},processUser:function(t){this.loggedIn=!0,this.user.name=t.Du.tf,console.log("USER CURRENT",t)},onSuccess:function(t){var e=t.tv,n=t.Cc;console.log("SUCCESS",e,n),this.serverConfirm({profile:e,auth:n})},onFailure:function(t){console.log("Failure",t)},getToken:function(){return this.$cookies.get("itinerator-token")},serverConfirm:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var a,i,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.profile,i=t.auth,r="https://itinerator-api.herokuapp.com",n.next=5,Bt.a.post("".concat(r,"/auth/google"),{token:i.id_token,profile:a,auth:i});case 5:s=n.sent,s&&(e.$emit("login",s.data.jwtToken),e.$cookies.set("itinerator-token",s.data.jwtToken,"30d")),e.loggedIn=!0,e.loading=!1;case 9:case"end":return n.stop()}}),n)})))()}}},Wt=qt,Qt=(n("b1e8"),Object(m["a"])(Wt,Gt,Yt,!1,null,"bd376a48",null)),Xt=Qt.exports,Zt={name:"App",data:function(){return{auth:null}},components:{Dashboard:Jt,ItineratorGoogleIdentityLogin:Xt},methods:{saveAuthorization:function(t){this.auth=t}}},te=Zt,ee=n("7496"),ne=n("40dc"),ae=n("f6c4"),ie=Object(m["a"])(te,i,r,!1,null,null,null),re=ie.exports;y()(ie,{VApp:ee["a"],VAppBar:ne["a"],VImg:S["a"],VMain:ae["a"],VSpacer:et["a"]});var se=n("f309");a["a"].use(se["a"]);var oe=new se["a"]({}),ce=n("c9bf"),le={clientId:"319013726287-iph43il9usnh7rosftnorlr5no9tht6r.apps.googleusercontent.com",scope:"profile email",prompt:"select_account"};a["a"].use(ce["a"],le);var ue=n("2b27"),de=n.n(ue);a["a"].use(de.a),a["a"].config.productionTip=!1,new a["a"]({vuetify:oe,render:function(t){return t(re)}}).$mount("#app")},"687c":function(t,e,n){"use strict";n("ab12")},ab12:function(t,e,n){},b0e0:function(t,e,n){"use strict";n("47a7")},b1e8:function(t,e,n){"use strict";n("eedf")},c178:function(t,e,n){"use strict";n("ed54")},ce99:function(t,e,n){"use strict";n("2176")},d4e2:function(t,e,n){"use strict";n("3a5d")},e898:function(t,e,n){},ed54:function(t,e,n){},eedf:function(t,e,n){}});
//# sourceMappingURL=app.b0d73f21.js.map